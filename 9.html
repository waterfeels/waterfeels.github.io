
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">

<html>

<head>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<meta http-equiv="Content-Style-Type" content="text/css">

<title></title>

<meta name="Generator" content="Cocoa HTML Writer">

<meta name="CocoaVersion" content="1504">

<style type="text/css">

/**
 * Content
 */

body {
	background-color: #e5ffe5;
	color: #000;
}

a:active {
	opacity: 0.7;
}

.page a.active {
	opacity: .4;
}

i,
em {
	font-style: italic;
}

b,
strong {
	font-weight: bold;
}

sub,
sup {
	position: relative;
	vertical-align: baseline;
}

sub {
	top: 0.3em;
}

sup {
	top: -0.4em;
}

s {
	text-decoration: line-through;
}

img {
	border: 0;
	padding: 0;
}

ul,
ol {
	margin: 0;
	padding: 0 0 0 1em;
}

blockquote {
	margin: 0;
	padding: 0 0 0 2em;
}

hr {
	background: rgba(0, 0, 0, 0.15);
	border: 0;
	height: 1px;
	display: block;
}

.content img {
	float: none;
	margin-bottom: .5em;
}

.gallery_image_caption {
    margin-top: 1.2rem;
    margin-bottom: 0.5rem;
    font-size: 1.3rem;
	font-weight: 400;
	color: rgba(0, 0, 0, 0.85);
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons/*!System*/;
	font-style: normal;
	line-height: 1.3;	
}

/**
 * Loading Animation

 */

.loading[data-loading] {
	position: fixed;
	bottom: 8px; 
    left: 8px;
}

/**
 * Editor styles
 */

[data-predefined-style="true"] bodycopy {
	font-size: 1.7rem;
	font-weight: 400;
	color: rgba(0, 0, 0, 0.75);
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif, 'Sans Serif', Icons /*!System*/;
	font-style: normal;
	line-height: 1.3;
}

[data-predefined-style="true"] bodycopy a {
    border-bottom: 0.075em solid rgba(0, 0, 0, 0.75);
	color: rgba(0, 0, 0, 0.75);
	padding-bottom: 0.1em;
	text-decoration: none;
}

[data-predefined-style="true"] bodycopy a:hover {

}

bodycopy a.image-link,
bodycopy a.icon-link,
bodycopy a.image-link:hover,
bodycopy a.icon-link:hover {
	border-bottom: 0;
	padding-bottom: 0;
}

[data-predefined-style="true"] h1 {
	font-family: 'Garage Gothic', Icons /*!Persona*/;
	font-style: normal;
	font-weight: 900;
	padding: 0;
	margin: 0;
	font-size: 7.8rem;
	line-height: 0.9;
	color: rgba(0, 0, 0, 0.75);
	text-rendering: optimizeLegibility;
}

[data-predefined-style="true"] h1 a {
    border-bottom: 0em solid rgba(0, 0, 0, 0.75);
	color: rgba(0, 0, 0, 0.75);
}

[data-predefined-style="true"] h2 {
	font-family: Quiosco, Icons /*!Persona*/;
	font-style: normal;
	font-weight: 400;
	padding: 0;
	margin: 0;
	color: rgba(0, 0, 0, 0.85);
	font-size: 3rem;
	line-height: 1.2;
	text-rendering: optimizeLegibility;
}

[data-predefined-style="true"] h2 a {
    border-bottom: 0em solid rgba(0, 0, 0, 0.75);
	color: rgba(0, 0, 0, 0.85);
}

[data-predefined-style="true"] small {
    background: #ff0;
	display: inline-block;
	font-size: 1.4rem;
	line-height: 1.3;
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif, 'Sans Serif', Icons /*!System*/;
	font-style: normal;
	font-weight: 400;
	color: rgba(0, 0, 0, 0.75);
}

[data-predefined-style="true"] small a {
    border-bottom: 0em solid rgba(0, 0, 0, 0.75);
	color: rgba(0, 0, 0, 0.75);
}

/**
 * Breakpoints
 */


[data-css-preset] .page {
    background-color: initial /*!page_bgcolor*/;
}

.mobile .page,
[data-css-preset].mobile .page {
	position: relative;
	min-height: 10px;
	max-width: 100%;
	width: 100%;
	background-color: transparent /*!page_bgcolor*/;
}

[data-css-preset] .container {
	margin-left: auto /*!content_center*/;
	margin-right: auto /*!content_center*/;
	text-align: left /*!text_left*/;
}

[data-css-preset] body {
	background-color: rgb(255, 255, 255) /*!body_bgcolor*/;
}

[data-css-preset] .container_width {
	width: 90%/*!content_center*/;
}

[data-css-preset] .content_padding {
	padding-top: 8rem /*!main_margin*/;
	padding-bottom: 8rem /*!main_margin*/;
	padding-left: 8rem /*!main_margin*/;
	padding-right: 8rem /*!main_margin*/;
}


[data-css-preset] text-limit {
	display: inline-block /*!text_width*/;
	max-width: 66rem/*!text_width*/;
}

/**
 * Thumbnails
 */

div[thumbnails] {
	justify-content: flex-start;
}

[data-css-preset] .thumbnails {
   	background-color: rgba(0, 0, 0, 0)/*!thumbnails_bgcolor*/;   
}

[data-css-preset] .thumbnails_width {
    width: 95%/*!thumbnails_width*/;
}

[data-css-preset] [thumbnails-pad] {
    padding: 2.95rem/*!thumbnails_padding*/;
}

[data-css-preset] [thumbnails-gutter] {
    margin: -5.9rem/*!thumbnails_padding*/;
}

[data-css-preset] [responsive-layout] [thumbnails-pad] {
    padding: 1.5rem/*!responsive_thumbnails_padding*/; 
}

[data-css-preset] [responsive-layout] [thumbnails-gutter] {
    margin: -3rem/*!responsive_thumbnails_padding*/; 
}

.thumbnails .thumb_image {
	outline: 1px solid rgba(0,0,0,.12);
    outline-offset: -1px;
}

.thumbnails .title {
    margin-top: 1.7rem;
    margin-bottom: .3rem;
    font-size: 1.7rem;
	font-weight: 400;
	color: rgba(0, 0, 0, 0.75);
	font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif, 'Sans Serif', Icons /*!System*/;
	font-style: normal;
	line-height: 1.1;
    text-align: left;
}

.thumbnails .tags {
    margin-top: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 2.2rem;
	font-weight: 400;
	color: rgba(0, 0, 0, 0.35);
	font-family: Quiosco, Icons /*!Persona*/;
	font-style: italic;
	line-height: 1.2;
    text-align: center;
}

.thumbnails .tags a {
	border-bottom: 0;
    color: rgba(0, 0, 0, 0.35);
    text-decoration: none;
}

.thumbnails .has_title .tags {
	margin-top: 0rem;
}

/**
 * Site Menu
 */

[data-css-preset] #site_menu_button {
    color: rgba(0, 0, 0, 0.75);
    line-height: 1;
    font-size: 28px /*!site_menu_button*/;
    padding: 6px;
    line-height: 1;
    background: rgba(33, 32, 46, 0);
    position: fixed;
    top: 2rem /*!site_menu_button*/;
	right: 2rem /*!site_menu_button*/;
}

body.mobile #site_menu_button {
	margin: -6px;
    font-size: 34px;
}

#site_menu_button.custom_icon {
	width: 40px;
    height: auto;
}

#site_menu_button.active {
	display: none;
}

/**
 * Site Menu
 */

#site_menu {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons /*!System*/;
	background: rgba(20, 20, 20, 0.95);
	font-size: 20px;
	font-style: normal;
	font-weight: 400;
	padding: 20px 30px 90px 30px;
	max-width: 400px;
	min-width: 300px;
	text-align: left;
	display: flex;
	justify-content: flex-start;
}

body.mobile #site_menu {
	width: 100%;
}

#site_menu .page-link a {
	color: rgba(255, 255, 255, 0.75);
}

#site_menu .set-link > a {
	color: rgba(255, 255, 255, 0.75);
	font-weight: bold;
}

#site_menu a:active {
	opacity: .7;
}

#site_menu a.active {
	opacity: .4;
}

#site_menu .close {
	display: none;
	color: rgba(255, 255, 255, 0.4);
	line-height: .85em;
	font-size: 45px;
}

body.mobile #site_menu .close {
	display: block;
	font-size: 50px;
	line-height: 1em;
}

#site_menu .break {
	height: 28px;
}

#site_menu .indent {
	margin-left: 28px;
}

/*
 * Shop Button
 */

[data-css-preset] #shop_button {
	color: rgba(0, 0, 0, 0.75);
    background: transparent;
	font-size: 40px;
    font-style: normal;
	font-weight: 400;
    line-height: 1;
    position: fixed;
	padding: 6px;
	bottom: 3rem /*!shop_button*/;
	left: 3rem /*!shop_button*/;
}

#shop_button.text {
    font-family: Quiosco, Icons /*!Persona*/;
	font-style: normal;
	font-weight: 400;
	font-size: 3rem;
    padding: 0;
    line-height: 1.2;
}

#shop_button.custom_icon {
	width: 40px;
    height: auto;
}

body.mobile #shop_button:not(.text) {
	margin: -6px;
    font-size: 46px;
}

/*
 * Shop Product Widget
 */

.shop_product {
    width: 100%;
	max-width: 22rem;
    position: relative;
    display: block;
}

.shop_product .price {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons /*!System*/;
	font-size: 1.7rem;
    font-weight: bold;
	line-height: 1;
	color: rgba(0, 0, 0, 0.75);
    display: block;
    margin-bottom: 1rem;
}

.shop_product .dropdown {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons /*!System*/;
    font-size: 1.4rem;
    display: inline-block;
	width: 100%;
    border: 1px solid rgba(0,0,0,.2);
    background:  white url(http://static.cargocollective.com/assets/images/select-arrows.svg) no-repeat right;
    margin-bottom: 1rem;
    line-height: 1.2;
    padding: .7rem 1rem;
}

.shop_product .button {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons /*!System*/;
	font-size: 1.4rem;
    background: rgba(0, 0, 0, 0.75);
    color: rgba(255,255,255,1);
    flex: 0 0 50%;
    text-align: left;
    display: inline-block;
	line-height: 1;
    padding: .8rem 1rem .9rem;
}



/*
 * Image Zoom
 */

.content img.image-zoom:active {
	opacity: .7;
}

.image-zoom-background {
	background: rgba(255, 255, 255, 0.95);
}


/**
 * Image Zoom Navigation Arrows 
 */

.image-zoom-navigation .left-arrow,
.image-zoom-navigation .right-arrow {
    /* Change height/width together to scale */
    height: 36px;
    width: 36px;
}

.image-zoom-navigation .left-arrow .inner-color,
.image-zoom-navigation .right-arrow .inner-color {
    fill: #fff;
}

.image-zoom-navigation .left-arrow .outer-color,
.image-zoom-navigation .right-arrow .outer-color {
    fill: #000;
    opacity: 0.2;
}

.image-zoom-navigation .close-button {  
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    /* Change height/width together to scale */
    width: 36px;
    height: 36px;
}

.image-zoom-navigation .close-button .inner-color {
    fill: #fff;
}

.image-zoom-navigation .close-button .outer-color {
    fill: #000;
    opacity: 0.2;
}

/** 
 * Image Gallery Navigation Arrows 
 */
 
.image-gallery-navigation .left-arrow,
.image-gallery-navigation .right-arrow {
    /* Change height/width together to scale */
    height: 56px;
    width: 56px;
}

.image-gallery-navigation .left-arrow .inner-color,
.image-gallery-navigation .right-arrow .inner-color {
    fill: #fff;
}

.image-gallery-navigation .left-arrow .outer-color,
.image-gallery-navigation .right-arrow .outer-color {
    fill: #000;
    opacity: 0.2;
}

/**
 * Wallpaper Backdrop Navigation Arrows 
 */

.wallpaper-navigation .left-arrow,
.wallpaper-navigation .right-arrow {
   /* Change height/width together to scale */
   width: 56px;
   height: 56px;
}

.wallpaper-navigation .left-arrow .inner-color,
.wallpaper-navigation .right-arrow .inner-color {
   fill: #fff;
}

.wallpaper-navigation .left-arrow .outer-color,
.wallpaper-navigation .right-arrow .outer-color {
    fill: #000;
    opacity: 0.2;
}


/**
 * Feed
 */

.feed .content_container .page {
    border-bottom: 0px dashed rgba(0, 0, 0, 0.2);
}

.feed .content_container .page_container:last-child .page {
	border-bottom: 0;
}



/*
 * Audio Player
 */

.audio-player {
    max-width: 36rem;
    height: 3.3rem;
    outline: 1px solid rgba(0,0,0,0.15);
    color: rgba(0, 0, 0, 0.6);
    background: #fff;
    font-size: 1.2rem;
    line-height: 1.3;
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif, "Sans Serif", Icons/*!System*/;
    font-style: normal;
    font-weight: 400;
    text-align: left;
    margin: 1px 1px 1em 1px;
}

body.mobile .audio-player {
    max-width: 100%;
}

.audio-player .separator {
    width: 1px;
    background-color: rgba(0,0,0,0.15);
}

.audio-player .button {
    background: transparent;
    cursor: pointer;
    fill: rgba(0, 0, 0, 0.85);
}

.audio-player .icon {
    fill: rgba(0, 0, 0, 0.85);
    padding: 30%;
    width: 100%;
    margin: auto;
}

.audio-player .buffer {
    background: rgba(0,0,0,0.03);
}

.audio-player .progress {
    background: rgba(0,0,0,0.1);
}

.audio-player .progress-indicator {
    border: 1px solid rgba(0, 0, 0, 0.7);
    width: 1px;
    height: 100%;
    right: 0;
    position: absolute;
    cursor: ew-resize;
}

.audio-player .note-icon {
    height: 100%;
    width: 3.8rem;
    padding: 1rem;
    fill: rgba(0, 0, 0, 0.5);
}

.audio-player .current-time {
    padding-left: 1rem;
}

.audio-player .total-time {
    padding-right: 1rem;
}

</style>

</head>

<body>
<div class="header" id="myHeader">
  <h2><font face="courier new">ana zim<br><br>
about / portfolio / cv / tal vez
  </font>
 </h2>
</div>


<h1>ideas for portfolio categories</h1>

 <div class="wrapper">
   <div class="item1"><img src="/art/20171122_120135.jpg" height="200px"></div>
   <div class="item2"><img src="/art/20171122_121319.jpg" height="200px"></div>
   <div class="item3"><img src="/art/20181211_110802_003.jpg" height="200px"></div>  
   <div class="item4"><img src="/art/20181211_111315_001.jpg" height="200px"></div>
   <div class="item5"><img src="/art/20181211_111541_001.jpg" height="200px"></div>
   <div class="item6"><img src="/art/20181211_111740_001.jpg" height="200px"></div>
   <div class="item7"><img src="/art/20181211_111826_002.jpg" height="200px"></div>
  <div class="item8"><img src="/art/20181211_112604_002.jpg" height="200px"></div>  
 
 </div>
</body>


<p style="text-align:right;" class="p1"><span class="s1">
......................................<br>
digital<br>
gifs of batter<br>
event gifs
<br><br>
photography<br>
series of dishes<br>
cars
<br><br>
series?
<br><br>
drawing and painting<br>
hawaii sad cards<br>
sketches<br>
gouache<br>
screenprint
<br><br>
culinary arts


</text></span></p>
<p style="text-align:right;" class="p1"><span class="s1">
digital<br>
gifs of batter<br>
event gifs
<br><br>
photography<br>
series of dishes<br>
cars
<br><br>
series?
<br><br>
drawing and painting<br>
hawaii sad cards<br>
sketches<br>
gouache<br>
screenprint
<br><br>
culinary arts<br>
.......................................

</text></span></p>
<p style="text-align:right;" class="p1"><span class="s1">
digital<br>
gifs of batter<br>
event gifs
<br><br>
photography<br>
series of dishes<br>
cars
<br><br>
series?
<br><br>
drawing and painting<br>
hawaii sad cards<br>
sketches<br>
gouache<br>
screenprint
<br><br>
culinary arts<br>
.......................................

</text></span></p>

<script>
// When the user scrolls the page, execute myFunction 
window.onscroll = function() {myFunction()};

// Get the header
var header = document.getElementById("myHeader");

// Get the offset position of the navbar
var sticky = header.offsetTop;

// Add the sticky class to the header when you reach its scroll position. Remove "sticky" when you leave the scroll position
function myFunction() {
  if (window.pageYOffset > sticky) {
    header.classList.add("sticky");
  } else {
    header.classList.remove("sticky");
  }
}

define([
	'/_jsapps/imagegallery/base.js?nocache=18-02-07'
],
function(
	GalleryBase
) {

	return GalleryBase.extend({

		// keep cache of imgs for when we re-render
		image_cache: {},

		name: 'Columns',
		parentView: null,

		/**
		 * Set attributes to el for layout options.
		 *
		 */
		setElAttributes: function () {
			var model_data = _.clone(this.galleryOptions.data)
			if ( this.mobile_active && model_data.responsive){
				model_data = _.extend(model_data, model_data.mobile_data);	
			}	
			
			this.$el.removeClass('slick')
			this.$el.removeAttr('image-gallery-horizontal-align image-gallery-vertical-align image-gallery-pad image-gallery-gutter data-exploded image-gallery-row data-slideshow-in-transition');
			this.$el.attr({
				'image-gallery'	: this.name.toLowerCase(),
				'image-gallery-row'	: '',
				'image-gallery-pad'    : model_data.image_padding,
				'image-gallery-gutter'	: model_data.image_padding * 2, 
				'style': ''
			});
		},		 

		/**
		 * Bind event listeners.
		 *
		 * @return {Object} this
		 */
		initialize: function (options) {

			if (!options){
				return
			}

			if( options.parentView) {
				this.parentView = options.parentView;
			}

			if ( options.galleryOptions){
				this.galleryOptions = options.galleryOptions
			}

			if ( options.mobile_active){
				this.mobile_active = options.mobile_active
			}


			this.mobileToggleCallback = this.mobileToggle.bind(this)
			window.addEventListener('resize', this.mobileToggleCallback)

			// .render() is called from inside parent view

			// this.model = thumbnail settings. Render on change to dynamically update
			// this.listenTo(this.model, 'change', this.handleUpdates);

			return this;
		},

		mobileToggle: function(){

			var isMobileSize = Cargo.Helper.IsMobileWindowSize( document.documentElement.clientWidth )

			if ( !this.mobile_active && isMobileSize ){
				this.mobile_active = true;
				this.requestTick();

			} else if ( this.mobile_active && !isMobileSize ){
				this.mobile_active = false;
				this.requestTick();
			}
			
		},

		requestTick: function(){
			var _this = this;
			if ( !this.ticking ){
				window.requestAnimationFrame(function(){
					_this.handleUpdates(null, {changing: 'mobile_active'})
					_this.ticking = false;				
				})
				this.ticking = true;

			}
		},

		destroy: function(){
			window.removeEventListener('resize', this.mobileToggleCallback)
		},

		/**
		 * Handle the changes to the model triggered from the admin panel
		 * @param  {Object} event
		 * @param  {Object} options sent from settings model, changing and value
		 */		
		handleUpdates: function(galleryOptions, options){

			if ( galleryOptions ){
				this.galleryOptions = galleryOptions	
			}
			
			switch (options.changing) {

				case 'responsive_image_padding':
				
					if ( this.mobile_active && this.galleryOptions.data.responsive){
						this.render();						
					}

					break;
				case 'image_padding':
				
					if ( !this.mobile_active || !this.galleryOptions.data.responsive){
						this.render();						
					}

					break;					

				case 'mobile_active':
					if ( this.galleryOptions.data.responsive ){
						this.render();	
					}
					break;

				case 'responsive':
					if ( this.mobile_active){
						this.render();	
					}
    				break;

				case 'thumbnail_mode':
					break;

				case 'responsive_columns':
				case 'columns':
					this.render();
					break;					

				default:
				    break;	
			}

		},

		getThumbRectPositionRelatedToPoint: function(point,rect){

			var in_y = false,
				in_x = false,
				above = false,
				below = false,
				to_left = false,
				to_right = false,
				distance = 0,
				rise = 0,
				run = 0,
				midpoint_distance = 0,
				midpoint_rise = 0,
				midpoint_run = 0;

			if ( point.x >= (rect.left) && point.x <= (rect.left+rect.width) ){
				in_x = true;
			}

			if ( point.y >= (rect.top) && point.y <= (rect.top+rect.height) ){
				in_y = true;
			}

			if ( rect.left > point.x ){
				to_right = true;
			} else if ( point.x > rect.left+rect.width ){
				to_left = true;
			}

			if ( rect.top > point.y ){
				below = true;
			} else if ( point.y > rect.top+rect.height ){
				above = true;
			}

			if ( in_x && in_y){

				var midpoint_rise = rect.midPoint.y - point.y;
				var midpoint_run = rect.midPoint.x - point.x;
				midpoint_distance = Math.sqrt(midpoint_rise*midpoint_rise + midpoint_run*midpoint_run)

			} else {

				if ( below ){

					rise = rect.top - point.y;

				} else if ( above ) {

					rise = (rect.top+rect.height) - point.y;

				}

				if ( to_right ){

					run = rect.left - point.x;

				} else if (to_left){

					run = (rect.left + rect.width) - point.x;

				}		

			}

			distance = Math.sqrt( (rise*rise)+(run*run) );

			return {
				in_x: in_x,
				in_y: in_y,
				above: above,
				below: below,
				to_right: to_right,
				to_left: to_left,
				distance: distance,
				midpoint_rise: midpoint_rise,
				midpoint_run: midpoint_run,
				midpoint_distance: midpoint_distance,
				rise: rise,
				run: run,
				inside: in_x && in_y
			}

		},		

		indicateInsertion: function(event, dragged){

			var m = {x: event.clientX, y: event.clientY}

			var minDistAbove = 9e9;
			var minDistBelow = 9e9;
			var minDistToRight = 9e9;
			var minDistToLeft = 9e9;		
			var minDist = 9e9;

			var closestThumbToLeft = "default";
			var closestThumbToRight = "default";
			var closestThumbAbove = "default";
			var closestThumbBelow = "default";
			var closestThumb = "default";

			// build data into cache rects, also find closest thumb index
			for (var i in this.parentView.cachedRects.rects ){

				if ( i == 'default'){
					continue
				}

				var positions = this.getThumbRectPositionRelatedToPoint(m, this.parentView.cachedRects.rects[i] )

				this.parentView.cachedRects.rects[i].positions = positions;

				if ( this.parentView.cachedRects.rects[i].positions.distance < minDist ){
					minDist = this.parentView.cachedRects.rects[i].positions.distance;
					closestThumb = i;
				}

				if ( this.parentView.cachedRects.rects[i].positions.above && this.parentView.cachedRects.rects[i].positions.distance < minDistAbove){
					minDistAbove = this.parentView.cachedRects.rects[i].positions.distance;
					closestThumbAbove = i;
				}

				if ( this.parentView.cachedRects.rects[i].positions.below && this.parentView.cachedRects.rects[i].positions.distance < minDistBelow){
					minDistBelow = this.parentView.cachedRects.rects[i].positions.distance;
					closestThumbBelow = i;
				}

				if ( this.parentView.cachedRects.rects[i].positions.to_left && this.parentView.cachedRects.rects[i].positions.distance < minDistToLeft){
					minDistToLeft = this.parentView.cachedRects.rects[i].positions.distance;
					closestThumbToLeft = i;
				}

				if ( this.parentView.cachedRects.rects[i].positions.to_right && this.parentView.cachedRects.rects[i].positions.distance < minDistToRight){
					minDistToRight = this.parentView.cachedRects.rects[i].positions.distance;
					closestThumbToRight = i;
				}		
			}


			const rects = this.parentView.cachedRects.rects

			var targetNext = targetPrev = horizVertical = indicatePrev = indicateNext = "default";
			var percX, percY;

			if ( rects[closestThumb].positions.inside ){
				percX = rects[closestThumb].positions.midpoint_run / (rects[closestThumb].width * -.5);
				percY = rects[closestThumb].positions.midpoint_rise / (rects[closestThumb].height * -.5);
			} else {

				if (closestThumb == closestThumbToRight){
					percX = 1;
				} else if ( closestThumb == closestThumbToLeft ){
					percX = -1;
				}  else {
					percX = m.x > rects[closestThumb].midPoint.x ? 1: -1;
				}

				if ( closestThumb == closestThumbAbove ){
					percY = -1;
				} else if ( closestThumb == closestThumbBelow ) {
					percY = 1;
				} else {
					percY = m.y > rects[closestThumb].midPoint.y ? 1: -1;		
				}

			}

			// if we are inside the thumb, test if we favor a specific side
			if (
				percX > 0
				&& (
					(
						(
							(
								rects[closestThumb].positions.inside
								&& rects[closestThumb].top == rects[closestThumbToRight].top
								&& parseInt(closestThumb) == parseInt(closestThumbToRight)-1
							)
							|| (
								!rects[closestThumb].positions.inside
								&& (
									(
										closestThumb == closestThumbToRight
										&& rects[closestThumbToLeft].top == rects[closestThumb].top									
									)
									|| (
										rects[closestThumbToLeft].top == rects[closestThumbToRight].top	
										&& parseInt(closestThumbToLeft) == parseInt(closestThumbToRight)-1
									)
								)
							)
						)
						&& Math.abs(percX) >= Math.abs(percY*1.2) + -.2
					)
					|| (
						percY < 0
						&& (
							closestThumbAbove == "default"
						)
					)
				)
			){

				if ( closestThumb == closestThumbToRight ){
					targetNext = closestThumbToRight;
					targetPrev = closestThumbToLeft;
				} else {
					targetNext = closestThumbToRight;
					targetPrev = closestThumb;
				}

				horizVertical = "horizontal"

			} else if (

				percX <= 0
				&& (
					(
						(
							(
								rects[closestThumb].positions.inside
								&& rects[closestThumb].top == rects[closestThumbToLeft].top
								&& parseInt(closestThumbToLeft) == parseInt(closestThumb)-1
							)
							|| (
								!rects[closestThumb].positions.inside
								&& (
									(
										closestThumb == closestThumbToLeft
										&& rects[closestThumbToRight].top == rects[closestThumb].top
									)
									|| (
										rects[closestThumbToLeft].top == rects[closestThumbToRight].top
										&& parseInt(closestThumbToLeft) == parseInt(closestThumbToRight)-1
									)
								)
							)
						)
						&& Math.abs(percX) >= Math.abs(percY*1.2) + -.2
					)
					|| (
						percY < 0
						&& (
							closestThumbAbove == "default"
						)
					)
				)
			){

				if ( closestThumb == closestThumbToLeft){
					targetNext = closestThumbToRight;
					targetPrev = closestThumbToLeft;	
				} else {
					targetNext = closestThumb;
					targetPrev = closestThumbToLeft;				
				}

				horizVertical = "horizontal"
			} else {

				if ( rects[closestThumb].positions.inside ){


					if ( percY >= 0 ) {

						var nextThumb = this.$el.find('[data-gallery-item-id="'+closestThumb+'"]').next('[data-gallery-item-id]') 
						if ( nextThumb.length> 0){
							targetNext = nextThumb.attr('data-gallery-item-id')
						}
						targetPrev = closestThumb;
						
					} else {

						var prevThumb = this.$el.find('[data-gallery-item-id="'+closestThumb+'"]').prev('[data-gallery-item-id]') 
						if ( prevThumb.length> 0){
							targetPrev = prevThumb.attr('data-gallery-item-id')
						}
						targetNext = closestThumb;
					}

				} else {
					if ( closestThumbAbove == closestThumb) {

						var nextThumb = this.$el.find('[data-gallery-item-id="'+closestThumb+'"]').next('[data-gallery-item-id]') 
						if ( nextThumb.length> 0){
							targetNext = nextThumb.attr('data-gallery-item-id')
						}
						targetPrev = closestThumb;
						
					} else {

						var prevThumb = this.$el.find('[data-gallery-item-id="'+closestThumb+'"]').prev('[data-gallery-item-id]') 
						if ( prevThumb.length> 0){
							targetPrev = prevThumb.attr('data-gallery-item-id')
						}
						targetNext = closestThumb;
					}					
				}



				horizVertical = "vertical";

			}

			indicatePrev = targetPrev;
			indicateNext = targetNext;

			if( horizVertical =='horizontal' ){

				if ( targetNext == 'default' ){
					targetNext = parseInt(this.$el.find('[data-gallery-item-id="'+(parseInt(targetPrev)+1)+'"]').attr('data-gallery-item-id'));
					// indicateNext ='default'				
				} else {

					if ( targetPrev == 'default'){
						indicateNext = 0
					} else {
						indicateNext = parseInt(this.$el.find('[data-gallery-item-id="'+(parseInt(targetPrev)+1)+'"]').attr('data-gallery-item-id'));					
					}

				}

				if ( targetPrev == 'default' ){
					targetPrev = parseInt(this.$el.find('[data-gallery-item-id="'+(parseInt(targetPrev))+'"]').attr('data-gallery-item-id'));
					// indicatePrev ='nope!!!!!'				
				} else {
					indicatePrev = parseInt(this.$el.find('[data-gallery-item-id="'+(parseInt(targetPrev))+'"]').attr('data-gallery-item-id'));
				}

			} else {

				// if we are at the bottom of the gallery, choose whether or not to display the 'prev indication or not'
				if (targetNext == 'default')	{

					var columns = this.$el.find('div[column]')
					var minHeight = 9e9;
					var shortestColumnIndex = 1;

					columns.each(function(i){
						var index = i+1;
						var height = this.getBoundingClientRect().height;
						if ( height < minHeight ){
							shortestColumnIndex = index;
							minHeight = height;
						}
					});
					
					if ( parseInt(this.$el.find('[data-gallery-item-id="'+targetPrev+'"]').closest('div[column]').attr('column')) != shortestColumnIndex ) {
						indicatePrev = "default"
					} else {
						indicatePrev = targetPrev
					}

					targetNext = 9e9;

				} 

			}

			this.$el.find('.indication-prev, .indication-next').removeClass('indication-prev indication-next')				

			if ( horizVertical == 'horizontal' ){

				if ( indicatePrev != 'default' ){
					this.$el.find('[data-gallery-item-id="'+indicatePrev+'"]').addClass('indication-prev').css({
						'transform' : 'translateX(-2.5rem)',
						'transition' : 'transform .08s cubic-bezier(0, 0, 0, 1)',
						'position': 'relative',
						'z-index' : '99'						
					})
				}

				if ( indicateNext != 'default' ){
					this.$el.find('[data-gallery-item-id="'+indicateNext+'"]').addClass('indication-next').css({
						'transform' : 'translateX(2.5rem)',
						'transition' : 'transform .08s cubic-bezier(0, 0, 0, 1)',
						'position': 'relative',
						'z-index' : '99'						
					})
				}		

			} else {

				if ( indicatePrev != 'default' ){

					this.$el.find('[data-gallery-item-id="'+indicatePrev+'"]').addClass('indication-prev').css({
						'transform' : 'translateY(-2.5rem)',
						'transition' : 'transform .08s cubic-bezier(0, 0, 0, 1)',
						'position': 'relative',
						'z-index' : '99'						
					})

				}

				if ( indicateNext != 'default' ){

					this.$el.find('[data-gallery-item-id="'+indicateNext+'"]').addClass('indication-next').css({
						'transform' : 'translateY(2.5rem)',
						'transition' : 'transform .08s cubic-bezier(0, 0, 0, 1)',
						'position': 'relative',
						'z-index' : '99'						
					})

				}
			}

			this.$el.find('.gallery_card').not('.indication-next, .indication-prev').css({
				'position': '',
				'transform' : '',
				'z-index' : ''
			})
		
			this.parentView.insertionPoint = targetNext

		},

		resetIndication: function(){

			this.parentView.insertionPoint = 0;

			this.$el.find('.gallery_card').css({
				'position': '',
				'transform' : '',
				'z-index' : ''
			}).removeClass('indication-next indication-prev')

		},		

		/**
		 * @return {Object} this
		 */

		render: function () {

			var _this = this;

			var model_data = _.clone(this.galleryOptions.data)
			if ( this.mobile_active && model_data.responsive){
				model_data = _.extend(model_data, model_data.mobile_data);	
			}

			var padding = parseFloat(model_data.image_padding)
			var col_padding_ratio = 0;

			var caption_padding_ratio = 0;

			var caption_measure = document.createElement('DIV')
			caption_measure.className = 'gallery_card'
			caption_measure.setAttribute('image-gallery-col', 'x'+model_data.column_size)	
			caption_measure.setAttribute('image-gallery-pad', model_data.image_padding)		
			var caption_inner = document.createElement('DIV')
			caption_inner.className = 'gallery_image_caption'
			caption_inner.innerHTML ='Testing Text'

			caption_measure.appendChild(caption_inner)
			this.el.appendChild(caption_measure)
			caption_padding_ratio = caption_inner.offsetHeight/caption_inner.offsetWidth 


			if ( padding != 0){

				this.el.removeAttribute('data-padding-zero')

				var measurement_wrapper = document.createElement('DIV')
					measurement_wrapper.setAttribute('image-gallery-pad', model_data.image_padding)
					measurement_wrapper.style.boxSizing = "border-box"
					measurement_wrapper.style.width = "100%"
					measurement_wrapper.style.height = "10px"

				var measurement_inner = document.createElement('DIV')
					measurement_inner.style.width = "100%"
					measurement_inner.style.boxSizing = "border-box"					
					measurement_inner.style.height = "10px"
					measurement_inner.className = "measure_inner"

				measurement_wrapper.appendChild(measurement_inner)
				this.el.appendChild(measurement_wrapper)

				var measure_div_container = document.createElement('DIV');

				measure_div_container.style.cssText = 'position: fixed; top: -999px; left: -9999px; width: 0;'
				if ( model_data.responsive && this.mobile_active ){
					measure_div_container.setAttribute('responsive-layout','')			
				}

				for (var j = 0; j < 10; j++){
					var measure_div = document.createElement('DIV')
					measure_div.setAttribute('image-gallery-pad', padding)
					measure_div_container.appendChild(measure_div)
				}

				this.el.appendChild(measure_div_container)

				var pad_size = measure_div_container.offsetHeight / 10;

				col_padding_ratio = pad_size / ((measurement_inner.offsetWidth / model_data.columns) - pad_size)				

			} else {

				this.el.setAttribute('data-padding-zero', '')
				col_padding_ratio = 0;

			}
		
			var column_heights = [];
			var shortest_column = 0;
			var columns = [];		

			for (var i = 0; i < model_data.columns; i++){ 
				column_heights[i] = 0;
				columns[i] = document.createElement('div')
				$(columns[i]).attr({
					'column' : i+1,
					'image-gallery-col' : 'x'+model_data.column_size
				})
			}

			var images = _.sortBy(this.parentView.images, 'index');

			_.each( images, function(imageObject, index) {

				var image = _this.createItem(imageObject);

				image.setAttribute('data-gallery-item', '');
				image.setAttribute('data-gallery-item-index', index);


				// if this is being run as a mobile subview, maintain meta data when rendering

				var parentViewPath = _this.parentView.options.path ;
				if ( _this.parentView.options.path != 'columns' ){

					var meta_data = {}
					if ( _.property(index)(model_data.meta_data)  ){
						meta_data[parentViewPath] = model_data.meta_data[index]
					} else {
						meta_data[parentViewPath] = imageObject.meta
					}
					image.setAttribute('data-meta', JSON.stringify(meta_data));

				}

				var shortest_height = 9e9;

				for (var j =0; j < column_heights.length; j++){

					if ( column_heights[j] < shortest_height){
						shortest_height = column_heights[j];
						shortest_column = j;
					}
					
				}

				// caption is the last element in the queue with a data-caption attribute
				var interiorImages = image.querySelectorAll('img[width][height], iframe[width][height], video[width][height]')
				var caption = document.createElement('DIV')
				var hasCaption = false
				var isLink = false

				caption.className = 'gallery_image_caption'

				_.each(interiorImages, function(interiorImage){

					if (interiorImage.hasAttribute('data-caption')){
						caption.innerHTML = interiorImage.getAttribute('data-caption')
						hasCaption = true
					}

					if ( interiorImage.hasAttribute('data-elementresizer-child') ){
						return
					}

					$(interiorImage).attr({
						'data-elementresizer-no-resize' : '',
						'data-elementresizer-no-centering' : '',
						'data-elementresizer-no-vertical-resize': ''				
					})

					interiorImage.style.width = ''
					interiorImage.style.height = ''

				});

				if ( image.hasAttribute('width') && image.hasAttribute('height') && !image.hasAttribute('data-elementresizer-child') ){

					$(image).attr({
						'data-elementresizer-no-resize' : '',
						'data-elementresizer-no-centering' : '',
						'data-elementresizer-no-vertical-resize': ''				
					})					

					image.style.width = ''
					image.style.height = ''					
				};
		

				var thumb,
					ratio;

				if ( image.tagName === 'A' && interiorImages.length == 1 ){
					isLink = true
					thumb = image;
					ratio = interiorImages[0].getAttribute('height')/ interiorImages[0].getAttribute('width');
				} else {
					ratio = image.getAttribute('height')/image.getAttribute('width')
					thumb = document.createElement('DIV')
				};


				$(thumb).attr({
					'class' : 'gallery_card',
					'image-gallery-pad' : model_data.image_padding,
					'image-gallery-col' : '',
					'data-gallery-item-id': index
				})

				var thumb_inner = document.createElement('DIV')
				$(thumb_inner).attr({
					'class': 'gallery_card_image',
					'data-elementresizer-no-resize' : '',
					'data-elementresizer-no-centering' : '',					
					'style': 'height: 0px; padding-bottom: ' + (ratio*100) + '%'
				})


				if ( isLink ){

					$(interiorImages[0]).css({
						'width' : '',
						'height' : '',
						'margin' : ''
					}).removeAttr('data-scale');					
					thumb_inner.appendChild(interiorImages[0])

				} else {

					$(image).css({
						'width' : '',
						'height' : '',
						'margin' : ''
					}).removeAttr('data-scale');					
					thumb_inner.appendChild(image)	
				}
				
				thumb.appendChild(thumb_inner)

				if ( isLink) {

					if ( interiorImages[0].hasAttribute('data-caption') ){

						caption.innerHTML = interiorImages[0].getAttribute('data-caption');
						hasCaption = true;
						
					}
					
				} else {

					if ( image.hasAttribute('data-caption') ){

						caption.innerHTML = image.getAttribute('data-caption');
						hasCaption = true;

					}

				}

				if ( hasCaption){

					thumb.appendChild(caption);
					thumb.className += ' has_caption'					
					column_heights[shortest_column]+= ratio + col_padding_ratio + caption_padding_ratio;	

				} else {
					column_heights[shortest_column]+= ratio + col_padding_ratio;							
				}

				columns[shortest_column].appendChild(thumb)

			});

			// while rendering , we build cache of the order of the images as they came out
			this.el.innerHTML = ' '

			for (var k = 0; k < model_data.columns; k++){

				this.el.appendChild(columns[k])
			
			}

			this.setElAttributes();

			this.$el.find('.below-viewport').css('transition', 'initial').removeClass('below-viewport').css('transition', '')

			if ( this.rendered ){
				this.updateElementResizer();
			} else {
				this.$el.addClass('initialized');				
				// scrollMonitor.recalculateLocations()
				Cargo.Plugins.elementResizer.refresh()											
			}

			this.rendered = true;
			this.setElAttributes();

			Cargo.Event.trigger('image_gallery_rendered', this);

			return this;

		},

		updateElementResizer: _.debounce(function(){
				// scrollMonitor.recalculateLocations()
				Cargo.Plugins.elementResizer.refresh()	
		}, 80)


	})
	

});

</script>
</body>

</html>